<!DOCTYPE html>
<head>
	<link rel="stylesheet" href="css/bootstrap.css" type="text/css" charset="utf-8"/>
	<link rel="stylesheet" href="css/base.css" type="text/css" charset="utf-8"/>
	<script type="text/javascript" charset="utf-8">
		function plugin0()
		{
			return document.getElementById('plugin0');
		}
		plugin = plugin0;
		function addEvent(obj, name, func)
		{
			if (window.addEventListener) {
				obj.addEventListener(name, func, false); 
			} else {
				obj.attachEvent("on"+name, func);
			}
		}

		function load()
		{
			addEvent(plugin(), 'test', function(){
				alert("Received a test event from the plugin.")
			});
		}


		function pluginLoaded() {
			if (plugin().valid === true) {
				// console.log(plugin().gpg_store_keyid("100001437141003", "A3A8BDAD7C0C552C"));
				// console.log(plugin().gpg_get_keyid("100001437141003"));
				// var enc_a = plugin().gpg_encrypt_for("HIHIHIHI", "15396A7933EB059A");
				var enc_b = plugin().gpg_encrypt_with("BLABLABLA", "42BC1289F63A0D1977061D8EA3A8BDAD7C0C552C");
				// console.log(plugin().gpg_decrypt(enc_a.encoded_data));
				console.log(plugin().gpg_associatedKeys());
			} else {
				alert("Not valid :(");
			}
		}

		function addTestEvent()
		{
			addEvent(plugin(), 'echo', function(txt,count){
				alert(txt+count);
			});
		}

		function testEvent()
		{
			plugin().testEvent();
		}

	</script>
</head>
<body>
	<object id="plugin0" type="application/x-broadmask" width="300" height="300">
		<param name="onload" value="pluginLoaded" />
	</object><br />
</body>
</html>



